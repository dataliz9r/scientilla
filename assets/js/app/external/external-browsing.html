<div>
    <md-content>
        <md-tabs md-dynamic-height md-border-bottom class='notifications'>
            <md-tab md-on-select="vm.reset()" label="{{researchEntity.getDisplayName()}}" ng-repeat="researchEntity in vm.researchEntities">
                <md-content class="md-padding">
                    <md-input-container>
                        <label>Source</label>
                        <md-select ng-model="vm.source">
                            <md-option ng-disabled="!researchEntity.canUse(source)" ng-repeat="source in vm.sources" value="{{source}}">
                                {{source}} <span ng-hide="researchEntity.canUse(source)">- Not configured</span>
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-button class="md-raised" ng-disabled="!vm.source" ng-click="vm.sourceChanged(researchEntity, vm.source)">Search</md-button>
                    <md-progress-linear md-mode="indeterminate" ng-show="vm.status === vm.STATUS_LOADING"></md-progress-linear>
                    <div ng-show="vm.status === vm.STATUS_ERROR">
                        An error happened
                    </div>
                    <md-list ng-show="vm.status === vm.STATUS_READY">
                        <md-list-item class="md-3-line scientilla-main-list" ng-repeat="r in vm.references" >
                            <div>
                                <h3>
                                    <span ng-bind-html='r | title'></span>
                                </h3>
                                <div><i>{{r.authors}}</i></div>
                            </div>
                            <md-button class="list-elem-button md-icon-button" ng-click="vm.copyReference(r, researchEntity)" aria-label="Copy to draft">
                                <ng-md-icon icon="content_copy"></ng-md-icon>
                            </md-button>
                        </md-list-item>
                    </md-list>
                </md-content>
            </md-tab>
        </md-tabs>
    </md-content>
</div>
